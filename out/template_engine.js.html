<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: template/engine.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: template/engine.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Abstract engine. All engine should inherit this class.
 * @memberof leaf/lib/template/engines
 * @constructor Engine
 * @param {object} options - Optional settings.
 */

"use strict";

var core = require('../core'),
    assert = core.assert;

/** @lends Engine */
function Engine() {
    var s = this;
    s.init.apply(s, arguments);
}
Engine.prototype = {

    //------------------------
    // Public methods
    //------------------------
    /**
     * Name of this module.
     * This property will be use by resolve to find the engine.
     * @abstract
     * @type {string}
     */
    $name: undefined,

    /**
     * Alias name of this module.
     * This property will be use by resolve to find the engine.
     * @abstract
     * @type {string[]}
     */
    $aliases: undefined,
    /**
     * Initialize a engine.
     * @abstract
     * @param {object} options - Optional settings.
     */
    init: function (options) {
        var s = this;
    },
    /**
     * Clone this engine.
     * @returns {*} - Clone of engine.
     */
    clone: function () {
        var s = this;
        var Constructor = s._constructor;
        var clone = new Constructor(s);
        clone.set(s);
        return clone;
    },
    /**
     * Get a property.
     * @param {string} key - Key for property.
     * @returns {*} - Property value.
     */
    get: function (key) {
        var s = this;
        return s[key];
    },
    /**
     * Set a property to this property.
     * You set multiple properties by passing a single, object-type argument.
     * @function set
     * @param {string|object} key - Key for property.
     * @param {?*} [val] - Value to set.
     * @returns {Engine} - Returns self for chaining.
     * @example
     *      engine.set('foo', 'bar');
     *      engine.set({foo: 'bar'});
     */
    set: function (key, val) {
        var s = this;
        var args = arguments;
        var multiple = typeof(args[0]) === 'object';
        if (multiple) {
            s._setProperties(args[0]);
        } else {
            s._setProperty(key, val);
        }
        return s;
    },
    /**
     * Precompile a template string.
     * Precompiled template is a string with represents compiled template function.
     * @abstract
     * @param {string} source - Template source string.
     * @param {enginePrecompileCallback} callback - callback when done.
     */
    precompile: function (source, callback) {
        throw new Error('[precompile]Not implemented!');
    },
    /**
     * Compile a template string.
     * Compiled template is a function.
     * @abstract
     * @param {string} source - Template source string.
     * @param {engineCompileCallback} callback - Callback when done.
     */
    compile: function (source, callback) {
        throw new Error('[compile]Not implemented!');
    },
    //------------------------
    // Private properties
    //------------------------


    /**
     * Constructor class.
     * @function
     * @private
     */
    _constructor: Engine,
    /**
     * Set a property.
     * @param {string} key - Key for property.
     * @param {*} val - Value to set.
     * @returns {Engine} - Returns self for chaining.
     * @private
     */
    _setProperty: function (key, val) {
        var s = this;
        s[key] = val;
        return s;
    },
    /**
     * Set multiple properties.
     * @param {object} values - Properties to set.
     * @returns {Engine} - Returns self for chaining.
     * @private
     */
    _setProperties: function (values) {
        var s = this,
            keys = Object.keys(values || {});
        for (var i = 0, len = keys.length; i &lt; len; i++) {
            var key = keys[i];
            s._setProperty(key, values[key]);
        }
        return s;
    }
};


/**
 * Define a engine constructor.
 * @param {object} properties - Properties for constructor.
 * @returns {function} - Constructor function.
 */
Engine.define = function (properties) {
    assert(properties, "Properties is required.");

    var DefinedEngine = function () {
        var s = this;
        s.init.apply(s, arguments);
    };
    DefinedEngine.$isEngine = true;

    DefinedEngine.prototype = new Engine().set(properties);
    DefinedEngine.prototype._constructor = DefinedEngine;

    DefinedEngine.$name = properties.$name;
    DefinedEngine.$aliases = properties.$aliases;

    assert(properties.$name, "$name is required. This will be used by resolver.");
    assert(properties.compile, "properties.compile is should be required.");


    return DefinedEngine;
};

module.exports = Engine;


/**
 * Callback for engine precompile function.
 * @callback enginePrecompileCallback
 * @param {Error} err - precompile err
 * @param {string} tmplFunctionString - Precompiled template function.
 */

/**
 * Callback for engine compile function.
 * @callback engineCompileCallback
 * @param {Error} err - Compile err
 * @param {function} tmpl - Compiled template function.
 */</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-leaf_lib_bud.html">leaf/lib/bud</a></li><li><a href="module-leaf_lib_commands.html">leaf/lib/commands</a></li><li><a href="module-leaf_lib_factory.html">leaf/lib/factory</a></li><li><a href="module-leaf_lib_template.html">leaf/lib/template</a></li><li><a href="module-leaf_lib_util.html">leaf/lib/util</a></li></ul><h3>Classes</h3><ul><li><a href="leaf_lib_bu.BudLogger.html">BudLogger</a></li><li><a href="leaf_lib_bud.BudCompiler.html">BudCompiler</a></li><li><a href="leaf_lib_bud.BudLoader.html">BudLoader</a></li><li><a href="leaf_lib_bud.BudWriter.html">BudWriter</a></li><li><a href="leaf_lib_template.EngineSet.html">EngineSet</a></li><li><a href="leaf_lib_template.TmplSet.html">TmplSet</a></li><li><a href="leaf_lib_template_engines.Engine.html">Engine</a></li><li><a href="module-leaf_lib_bud.Bud.html">Bud</a></li></ul><h3>Global</h3><ul><li><a href="global.html#set">set</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a> on Sat Jun 06 2015 22:35:37 GMT+0900 (JST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
